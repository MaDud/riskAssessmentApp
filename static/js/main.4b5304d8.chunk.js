(this["webpackJsonprisk-assessment"]=this["webpackJsonprisk-assessment"]||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"q",(function(){return s})),a.d(t,"j",(function(){return c})),a.d(t,"A",(function(){return u})),a.d(t,"z",(function(){return o})),a.d(t,"i",(function(){return l})),a.d(t,"D",(function(){return d})),a.d(t,"b",(function(){return O})),a.d(t,"d",(function(){return j})),a.d(t,"f",(function(){return _})),a.d(t,"e",(function(){return y})),a.d(t,"c",(function(){return w})),a.d(t,"t",(function(){return k})),a.d(t,"m",(function(){return E})),a.d(t,"v",(function(){return S})),a.d(t,"u",(function(){return D})),a.d(t,"s",(function(){return z})),a.d(t,"r",(function(){return P})),a.d(t,"n",(function(){return R})),a.d(t,"y",(function(){return I})),a.d(t,"k",(function(){return T})),a.d(t,"l",(function(){return N})),a.d(t,"p",(function(){return V})),a.d(t,"a",(function(){return L})),a.d(t,"h",(function(){return F})),a.d(t,"x",(function(){return x})),a.d(t,"g",(function(){return H})),a.d(t,"B",(function(){return B})),a.d(t,"w",(function(){return U})),a.d(t,"C",(function(){return W})),a.d(t,"o",(function(){return G}));var n=a(2),r=a(357),i=a.n(r).a.create({baseURL:"https://riskassessmentapp.firebaseio.com/"}),s=function(){return{type:n.p}},c=function(e){return{type:n.j,event:e}},o=function(){return{type:n.N}},u=function(e){var t=e.target.value;return{type:n.O,searchValue:t.trim().toUpperCase()}},l=function(e){return{type:n.H,page:Number(e)}},d=function(e){return{type:n.T,event:e.target.id}},p=function(){return{type:n.b}},f=function(e,t){return{type:n.c,id:e,data:t}},m=function(e,t){return{type:n.e,id:e,data:t}},h=function(e){return{type:n.L,id:e}},v=function(e){var t;switch(e){case"new":t="Nie uda\u0142o si\u0119 zapisa\u0107 nowej oceny ryzyka. Spr\xf3buj ponownie";break;case"new_version":t="Nie uda\u0142o si\u0119 zapisa\u0107 nowej wersji oceny ryzyka. Sp\xf3buj ponownie";break;case"new_work_copy":t="Nie uda\u0142o si\u0119 zapisa\u0107 nowej kopii roboczej.";break;case"new_version_work_copy":t="Nie uda\u0142o si\u0119 zapisa\u0107 kopii roboczej nowej wersji oceny ryzyka.";break;case"add_new_from_work_copy":t="Nie uda\u0142o si\u0119 zapisa\u0107 nowej wersji/- oceny ryzyka. Spr\xf3buj ponownie.";break;default:t=null}return t},b=function(){return{type:n.d}},g=function(e){return{type:n.a,error:!0,message:v(e)}},O=function(e){return function(t){t(p()),Promise.all([i.post("/riskAssessment.json",e),i.put("/prevNumber.json",e.number)]).then((function(a){var n=a[0].data.name,r=e.version[0].assessmentData,i={no:Number(e.number),position:r.position,owner:r.owner,status:e.status,review:!1,overdue:!1};t(f(n,i))})).catch((function(e){t(g("new"))}))}},j=function(e,t){var a=Object.keys(t),n=t[a];return function(t){t(p()),i.put("/riskAssessment/"+e+"/version/"+a+".json",n).then((function(e){return t(b())})).catch((function(e){t(g("new_version"))}))}},_=function(e){return function(t){t(p()),Promise.all([i.post("/riskAssessment.json",e),i.put("/prevNumber.json",e.number)]).then((function(a){var n=a[0].data.name,r={no:Number(e.number),position:e.draft[0].assessmentData.position,owner:e.draft[0].assessmentData.owner};t(m(n,r))})).catch((function(e){return t(g("new_work_copy"))}))}},y=function(e,t,a){var n=Object.keys(a),r=a[n];return function(a){a(p()),i.put("/riskAssessment/"+e+"/draft/"+n+".json",r).then((function(n){console.log(n.data);var i={no:Number(t),postion:r.assessmentData.position,owner:r.assessmentData.owner};a(m(e,i))})).catch((function(e){return a(g("new_version_work_copy"))}))}},w=function(e,t,a){var n=a[Object.keys(a)];return function(a){i.get("/riskAssessment/"+e+".json").then((function(r){if("active"===r.data.status){var s=r.data.version.length;Promise.all([i.put("/riskAssessment/"+e+"/version/"+s+".json",n),i.delete("/riskAssessment/"+e+"/draft.json")]).then((function(t){a(b()),a(h(e))}))}else"draft"===r.data.status&&Promise.all([i.put("/riskAssessment/"+e+"/version/0.json",n),i.put("/riskAssessment/"+e+"/status.json",new String("active")),i.delete("/riskAssessment/"+e+"/draft.json")]).then((function(r){var i={no:Number(t),position:n.assessmentData.position,owner:n.assessmentData.owner,status:"active",review:!1,overdue:!1};a(f(e,i)),a(h(e))}))})).catch((function(e){return a("add_new_from_work_copy")}))}},E=function(){return{type:n.m}},k=function(){return function(e){n.x,i.get("/riskAssessment.json").then((function(t){var a=t.data,r=new Date,i={},s={},c=0,o=0,u=0;for(var l in a)if("active"===a[l].status){var d=a[l].version.length-1,p=a[l].version[d].assessmentData,f=new Date(p.reviewDate),m=f-r,h=Math.floor(m/864e5);if(i[l]={no:Number(a[l].number),position:p.position,owner:p.owner,nextReview:f,status:a[l].status,review:h<=30,overdue:h<0},c+=1,i[l].review&&(o+=1),i[l].overdue&&(u+=1),"active"===a[l].status&&a[l].draft)for(var v in a[l].draft)null!==a[l].draft[v]&&(s[l+"/"+v]={no:a[l].number,position:a[l].draft[v].assessmentData.position,owner:a[l].draft[v].assessmentData.owner})}else if("draft"===a[l].status)for(var b in a[l].draft)s[l+"/"+b]={no:a[l].number,position:a[l].draft[b].assessmentData.position,owner:a[l].draft[b].assessmentData.owner};e(function(e,t,a,r,i){return{type:n.v,RAdata:e,draftsData:t,active:a,overdue:r,review:i}}(i,s,c,u,o))})).catch((function(t){e({type:n.u})}))}},A=a(1),S=function(e){return{type:n.C,data:e.target.id,value:e.target.value}},N=function(){return{type:n.l}},L=function(e){return{type:n.K,RAtype:e}},C=function(e,t){return{type:n.J,id:e,number:t.number,version:t.version,assessmentData:t.assessmentData,hazardList:t.hazardList}},D=function(e,t,a){return function(r,s,c){var o,u,l=c.getFirebase,d={};l().auth().currentUser.getIdToken(!0).then((function(s){"new"===e?Promise.all([i.get("/hazardList.json?auth="+s),i.get("/prevNumber.json?auth="+s)]).then((function(e){for(var t in o=e[0].data)d["hazard"+t]={value:o[t],checked:!1,source:"",possibleEffects:"",protection:"",effect:"",propability:"",save:!1,clean:!0,valid:!1};var a,i;r((a=d,{type:n.P,hazardList:a})),r((i=e[1].data+1,{type:n.Q,number:i}))})).catch((function(e){return console.log(e)})):"preview"===e?i.get("/riskAssessment/"+t+".json").then((function(e){var a=(u=e.data).version[u.version.length-1],n=Object(A.a)(Object(A.a)({},u),{},{version:u.version.length-1,assessmentData:a.assessmentData,hazardList:a.hazardList});r(C(t,n))})).catch((function(e){return console.log(e)})):"new_version"!==e&&"draft"!==e||Promise.all([i.get("/hazardList.json"),i.get("/riskAssessment/"+t+".json")]).then((function(n){var i,s=new Date,c=s.getFullYear()+1,l=s.getMonth(),p=s.getDate(),f=new Date(c,l,p).toISOString().substring(0,10);for(var m in o=n[0].data,u=n[1].data,o)d["hazard"+m]={value:o[m],checked:!1,source:"",possibleEffects:"",protection:"",effect:"",propability:"",save:!1,clean:!0,valid:!1};for(var h in"new_version"===e?i=u.version[Number(a)-1]:"draft"===e&&(i=u.draft[a]),i.hazardList)d[h]=Object(A.a)(Object(A.a)({},i.hazardList[h]),{},{checked:!0});var v=Object(A.a)(Object(A.a)({},u),{},{version:a,assessmentData:Object(A.a)(Object(A.a)({},i.assessmentData),{},{date:(new Date).toISOString().substring(0,10),reviewDate:f}),hazardList:d});r(C(t,v))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}},z=function(e){return{type:n.y,id:e}},R=function(e){return{type:n.n,id:e}},I=function(e){return{type:n.M,id:e}},T=function(){return{type:n.k}},P=function(e,t){return{type:n.w,id:t,name:e.target.name,value:e.target.value}},V=function(){return{type:n.q}},F=function(e){return function(t){t({type:n.h}),i.put("/riskAssessment/"+e+"/status.json",new String("archive")).then((function(e){return t({type:n.i})})).catch((function(e){return t({type:n.f})}))}},x=function(){return{type:n.I}},H=function(e){return function(t){i.get("/riskAssessment/"+e+"/version.json").then((function(e){var a={};for(var r in e.data)a[r]={date:e.data[r].assessmentData.date,notice:e.data[r].assessmentData.notice};t(function(e){return{type:n.t,versionsList:e}}(a))})).catch((function(e){return t({type:n.s})}))}},B=function(e){return function(t,a,r){var i=r.getFirebase;t({type:n.z}),i().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){return t({type:n.D})})).catch((function(e){return t(function(e){return{type:n.E,error:e}}(e.message))}))}},U=function(){return function(e,t,a){var r=a.getFirebase;n.A,r().auth().signOut().then((function(){return e({type:n.F})})).catch((function(t){return e(function(e){return{type:n.G,error:e}}(t.message))}))}},W=function(e,t){return function(a,r,i){var s=i.getFirebase;a({type:n.B});var c=s();c.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(){return c.updateProfile({displayName:t})})).then((function(){return a({type:n.R})})).catch((function(e){return a(function(e){return{type:n.S,error:e}}(e.message))}))}},G=function(){return{type:n.o}}},133:function(e,t,a){e.exports={Navigation:"toolbar_Navigation__2DLvC",Logo:"toolbar_Logo__2x_g1",SideMenu:"toolbar_SideMenu__2yL3B"}},134:function(e,t,a){e.exports={Pagination:"pagination_Pagination__OZd6y",Active:"pagination_Active__1w9Fb",NotActive:"pagination_NotActive__3281k"}},198:function(e,t,a){e.exports={Button:"button_Button__35Y-O",Submit:"button_Submit__1z6bv",SubmitFocus:"button_SubmitFocus__155rv",Cancel:"button_Cancel__32tKt",CancelFocus:"button_CancelFocus__xui4E",Active:"button_Active__14dde",ActiveFocus:"button_ActiveFocus__2z4cz",Warning:"button_Warning__17i2d",WarningFocus:"button_WarningFocus__3eR81",Icon:"button_Icon__15kAo"}},2:function(e,t,a){"use strict";a.d(t,"p",(function(){return n})),a.d(t,"j",(function(){return r})),a.d(t,"O",(function(){return i})),a.d(t,"r",(function(){return s})),a.d(t,"N",(function(){return c})),a.d(t,"H",(function(){return o})),a.d(t,"T",(function(){return u})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"L",(function(){return h})),a.d(t,"m",(function(){return v})),a.d(t,"x",(function(){return b})),a.d(t,"v",(function(){return g})),a.d(t,"u",(function(){return O})),a.d(t,"C",(function(){return j})),a.d(t,"w",(function(){return _})),a.d(t,"P",(function(){return y})),a.d(t,"Q",(function(){return w})),a.d(t,"y",(function(){return E})),a.d(t,"n",(function(){return k})),a.d(t,"M",(function(){return A})),a.d(t,"k",(function(){return S})),a.d(t,"l",(function(){return N})),a.d(t,"q",(function(){return L})),a.d(t,"J",(function(){return C})),a.d(t,"K",(function(){return D})),a.d(t,"h",(function(){return z})),a.d(t,"i",(function(){return R})),a.d(t,"f",(function(){return I})),a.d(t,"I",(function(){return T})),a.d(t,"g",(function(){return P})),a.d(t,"t",(function(){return V})),a.d(t,"s",(function(){return F})),a.d(t,"z",(function(){return x})),a.d(t,"A",(function(){return H})),a.d(t,"B",(function(){return B})),a.d(t,"D",(function(){return U})),a.d(t,"F",(function(){return W})),a.d(t,"G",(function(){return G})),a.d(t,"E",(function(){return M})),a.d(t,"R",(function(){return K})),a.d(t,"S",(function(){return Y})),a.d(t,"o",(function(){return q}));var n="CLEAR_SORT_PANEL",r="CHANGE_PAGE_VIEW",i="SEARCH_VALUE",s="CLEAR_SEARCH",c="SEARCH",o="PAGE",u="SORT",l="ADD_INIT",d="ADD_SUCCESS",p="ADD_FAIL",f="ADD_WORK_COPY_SUCCESS",m="ADD_VERSION_SUCCESS",h="REMOVE_WORK_COPY",v="CLEAN_ADD_DATA",b="HAZARD_LIST_INIT",g="FETCH_HAZARD_LIST_SUCCESS",O="FETCH_HAZARD_LIST_FAIL",j="INPUT_HANDLER",_="HAZARD_INPUT_HANDLER",y="SET_HAZARDS",w="SET_NUMBER",E="HAZARD_SWITCH",k="CLEAN_DATA",A="SAVE_DATA",S="CHECK",N="CHECK_DATA",L="CLEAN_STATE",C="RA_PREVIEW",D="RA_TYPE",z="ARCHIVE_INIT",R="ARCHIVE_SUCCESS",I="ARCHIVE_FAIL",T="RA_OUTPUT_CLEAN",P="ARCHIVE_HISTORY_INIT",V="FETCH_ARCHIVE_HISTIRY_SUCCESS",F="FETCH_ARCHIVE_HISTIRY_FAIL",x="INIT_LOGIN",H="INIT_LOGOUT",B="INIT_SIGNUP",U="LOGIN",W="LOGOUT",G="LOGOUT_ERROR",M="LOGIN_ERROR",K="SIGNUP",Y="SIGNUP_ERROR",q="CLEAN_ERROR"},202:function(e,t,a){e.exports={Box:"userNav_Box__2r7Vp",Navigation:"userNav_Navigation__R25Xi"}},204:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(355),s=a.n(i);t.a=function(e){return e.show?r.a.createElement("div",{className:s.a.Backdrop,onClick:e.clicked}):null}},23:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(198),s=a.n(i);t.a=function(e){return r.a.createElement("button",{onClick:e.clicked,disabled:e.disabled,className:[s.a.Button,s.a[e.btnType],e.btnPosition].join(" "),id:e.id},e.children)}},279:function(e,t,a){"use strict";var n=a(33),r=a(34),i=a(36),s=a(35),c=a(0),o=a.n(c),u=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1,errorMessage:""},e.componentDidCatch=function(t,a){e.setState({hasError:!0,errorMessage:t})},e}return Object(r.a)(a,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("div",null,o.a.createElement("h1",null,this.state.error)):this.props.children}}]),a}(o.a.Component);t.a=u},351:function(e,t,a){e.exports={Navs:"navs_Navs__rSnLj"}},352:function(e,t,a){e.exports={Navbar:"navbar_Navbar__1HIsu"}},354:function(e,t,a){e.exports=a.p+"static/media/logo.30f34fd5.png"},355:function(e,t,a){e.exports={Backdrop:"backdrop_Backdrop__1oXSY"}},358:function(e,t,a){e.exports=a.p+"static/media/register.3da8fc15.png"},359:function(e,t,a){e.exports=a.p+"static/media/admin.1f725f87.png"},363:function(e,t,a){e.exports=a(724)},368:function(e,t,a){},41:function(e,t,a){e.exports={Style:"input_Style__1GiV0",Textarea:"input_Textarea__38kVo",Input:"input_Input__1WPxP"}},51:function(e,t,a){e.exports={Table:"userPanel_Table__2-Y8J",UserNav:"userPanel_UserNav__3rsSt",BasicUserNav:"userPanel_BasicUserNav__233tI",Image:"userPanel_Image__2LQPI",Search:"userPanel_Search__GC0Sa"}},52:function(e,t,a){e.exports={Table:"table_Table__2apyz",Head:"table_Head__qY0A_",Text:"table_Text__3XL69",Filtering:"table_Filtering__2XfNG",Sorted:"table_Sorted__1vKpO"}},67:function(e,t,a){e.exports={Search:"search_Search__bAILF",SearchBox:"search_SearchBox__1MHVI",SearchClose:"search_SearchClose__23A39",SearchActive:"search_SearchActive__1a1Ng",SearchNotActive:"search_SearchNotActive__1yRRe"}},7:function(e,t,a){"use strict";t.a=function(e){return e.children}},724:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(131),s=a.n(i),c=(a(368),a(7)),o=a(88),u=a(360),l=a(17),d=a(33),p=a(34),f=a(36),m=a(35),h=a(351),v=a.n(h),b=function(e){return r.a.createElement("li",{className:v.a.Navs},e.children)},g=a(352),O=a.n(g),j=a(23),_=a(26),y=r.a.createContext({isAuth:!1,logOut:function(){},addNew:function(){}}),w=function(e){return r.a.createElement("ul",{className:O.a.Navbar},r.a.createElement(b,null,r.a.createElement(_.b,{to:"/process"},"Opis procesu")),r.a.createElement(b,null,r.a.createElement(_.b,{to:"/"},"Panel u\u017cytkownika")),r.a.createElement(y.Consumer,null,(function(e){return e.isAuth?r.a.createElement(c.a,null,r.a.createElement(b,{onClick:e.addNew},r.a.createElement(_.b,{to:"/riskAssessmentForm"},"Nowa ocena")),r.a.createElement(b,null,r.a.createElement(j.a,{btnType:"Submit",clicked:e.logOut},"Wyloguj si\u0119"))):r.a.createElement(c.a,null,r.a.createElement(b,null,r.a.createElement(j.a,{btnType:"SubmitFocus"},r.a.createElement(_.b,{to:"/authentication"},"Logowanie / Rejestracja"))))})))},E=a(133),k=a.n(E),A=a(354),S=a.n(A),N=a(15),L=function(e){return r.a.createElement("div",{className:k.a.Navigation},r.a.createElement("div",{className:k.a.Logo},r.a.createElement(_.b,{to:"/"},r.a.createElement("img",{src:S.a,alt:"logo"}))),r.a.createElement("nav",null,r.a.createElement(w,null)),r.a.createElement("div",{className:k.a.SideMenu,onClick:e.clicked},r.a.createElement(N.a,{icon:"ellipsis-v"})))},C=a(204),D=a(89),z=a.n(D),R=function(e){var t=[z.a.SideDrawer,z.a.Close];return e.open&&(t=[z.a.SideDrawer,z.a.Open]),r.a.createElement(c.a,null,r.a.createElement(C.a,{show:e.open,clicked:e.clicked}),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked},r.a.createElement(w,null)))},I=a(39),T=a(66),P=a(10),V=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={sideDrawerVisible:!1},e.OpenSideDrawer=function(){e.setState({sideDrawerVisible:!0})},e.CloseSideDrawer=function(){e.setState({sideDrawerVisible:!1})},e.addNew=function(){e.props.cleanUserPanel(),e.props.RAtype("new")},e.exit=function(){e.props.logOut(),e.props.changeView("active")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.isAuth;return r.a.createElement(c.a,null,Object(T.isLoaded)(t)?r.a.createElement(c.a,null,r.a.createElement(y.Provider,{value:{isAuth:a,logOut:this.exit,addNew:this.addNew}},r.a.createElement(L,{clicked:this.OpenSideDrawer}),r.a.createElement(R,{open:this.state.sideDrawerVisible,clicked:this.CloseSideDrawer})),r.a.createElement("main",null,this.props.children)):null)}}]),a}(r.a.Component),F=Object(I.b)((function(e){return{auth:e.firebase.auth,isAuth:e.firebase.auth.uid}}),(function(e){return{logOut:function(){return e(P.w())},changeView:function(t){return e(P.j(t))},cleanUserPanel:function(){return e(P.q())},RAtype:function(t){return e(P.a(t))}}}))(V),x=a(51),H=a.n(x),B=a(279),U=a(52),W=a.n(U),G=a(134),M=a.n(G),K=function(e){for(var t=Math.ceil(Object.keys(e.data).length/e.range),a=[],n=1;n<=t;n++)a.push(n);var i=a.map((function(t,a){var n;return n=e.page===a+1?M.a.Active:M.a.NotActive,r.a.createElement("li",{key:a,id:a+1,onClick:function(){return e.changePage(a+1)},className:n},t)}));return r.a.createElement(c.a,null,t<=1?null:r.a.createElement("ul",{className:M.a.Pagination},r.a.createElement("li",{onClick:function(){return e.changePage(1)},id:"1"},r.a.createElement(N.a,{icon:"angle-double-left"})),i,r.a.createElement("li",{onClick:function(){return e.changePage(a.length)},id:a.length},r.a.createElement(N.a,{icon:"angle-double-right"}))))},Y=function(e){var t=e.columns.map((function(t){var a=null;return e.sortable&&(a=t.id===e.sortOption.id?"asc"===e.sortOption.sortType?r.a.createElement(N.a,{icon:"sort-up",className:W.a.Sorted}):r.a.createElement(N.a,{icon:"sort-down",className:W.a.Sorted}):a=r.a.createElement(N.a,{icon:"sort"})),r.a.createElement("th",{key:t.id,id:t.id,onClick:e.sortable?e.sort:null},r.a.createElement("div",{className:W.a.Head},r.a.createElement("span",{className:W.a.Text},t.label),e.sortable?r.a.createElement("div",{className:W.a.Filtering},a):null))})),a=e.rows,n=Object.keys(a).map((function(t){return r.a.createElement("tr",{key:t,id:t,onClick:e.view},Object.keys(e.rows[t]).map((function(a,n){return r.a.createElement("td",{key:n,headers:a},e.rows[t][a])})))}));if(e.sortable){var i=Object.values(a).sort((function(t,a){return"number"===typeof t[e.sortOption.id]?t[e.sortOption.id]-a[e.sortOption.id]:void 0===t[e.sortOption.id]||void 0===a[e.sortOption.id]?1:t[e.sortOption.id].toLowerCase().localeCompare(a[e.sortOption.id].toLowerCase())}));"asc"!==e.sortOption.sortType&&i.reverse();var s={};for(var o in i)for(var u in a)i[o][e.sortOption.id]===a[u][e.sortOption.id]&&(s[u]=a[u]);n=Object.keys(s).filter((function(t,a){return a>=(e.page-1)*e.range&&a<=e.page*e.range-1})).map((function(t){return r.a.createElement("tr",{key:t,id:t,onClick:e.view},Object.keys(e.rows[t]).map((function(a,n){return r.a.createElement("td",{key:n,headers:a},e.rows[t][a])})))}))}return r.a.createElement(c.a,null,r.a.createElement("table",{className:[W.a.Table,e.table].join(" ")},r.a.createElement("thead",null,r.a.createElement("tr",null,t)),r.a.createElement("tbody",null,n)),e.pagination?r.a.createElement(K,{data:e.rows,changePage:e.changePage,page:e.page,range:e.range}):null)},q=a(90),J=a.n(q),X=function(e){return r.a.createElement("div",{className:J.a.StatisticBox},r.a.createElement("h1",{id:"active",className:J.a.Active,onClick:e.clicked},e.active,r.a.createElement("span",null,"Aktywnych ocen ryzyka zawodowego")),r.a.createElement("h1",{id:"review",className:J.a.Review,onClick:e.clicked},e.review,r.a.createElement("span",null,"Wymagaj\u0105cych przegl\u0105du ocen ryzyka zawodowego")),r.a.createElement("h1",{id:"overdue",className:J.a.Overdue,onClick:e.clicked},e.overdue,r.a.createElement("span",null,"Przeterminowanych ocen ryzyka zawodowego")))},Z=a(202),Q=a.n(Z),$=a(91),ee=function(e){var t=[{value:"active",displayValue:"Aktywne"}];return e.review>0&&t.push({value:"review",displayValue:"Do przegl\u0105du"}),e.overdue>0&&t.push({value:"overdue",displayValue:"Przeterminowane"}),e.workCopy>0&&t.push({value:"drafts",displayValue:"Kopie robocze"}),r.a.createElement("div",{className:Q.a.Box},r.a.createElement("div",{className:Q.a.Navigation},r.a.createElement(j.a,{btnType:"active"===e.activeBtn?"ActiveFocus":"Active",id:"active",clicked:e.clicked},"Aktywne"),0!==e.review?r.a.createElement(j.a,{btnType:"review"===e.activeBtn?"WarningFocus":"Warning",id:"review",clicked:e.clicked},"Do przegl\u0105du"):null,0!==e.overdue?r.a.createElement(j.a,{btnType:"overdue"===e.activeBtn?"CancelFocus":"Cancel",id:"overdue",clicked:e.clicked},"Przeterminowane"):null,e.workCopy>0?r.a.createElement(j.a,{btnType:"drafts"===e.activeBtn?"SubmitFocus":"Submit",id:"drafts",clicked:e.clicked},"Kopie robocze"):null,r.a.createElement($.a,{elementType:"select",options:t,changed:e.changed})),r.a.createElement(j.a,{btnType:"Submit",clicked:e.submit},r.a.createElement(N.a,{icon:"folder-plus"})))},te=a(67),ae=a.n(te),ne=function(e){return r.a.createElement("div",{className:ae.a.Search},r.a.createElement(j.a,{clicked:e.changeSearch,btnType:e.active?"SubmitFocus":"Submit"},r.a.createElement(N.a,{icon:"search"})),e.active?r.a.createElement("div",{className:ae.a.SearchBox},r.a.createElement($.a,{elementType:"input",type:"text",placeholder:"Szukaj...",changed:e.changed,value:e.value,autoFocus:!0}),r.a.createElement("div",{className:ae.a.SearchClose,onClick:e.closeSearch},r.a.createElement(N.a,{icon:"times",className:e.search?ae.a.SearchActive:ae.a.SearchNotActive}))):null)},re=a(358),ie=a.n(re),se=a(359),ce=a.n(se),oe=[{label:"Numer",id:"number"},{label:"Stanowisko",id:"position"},{label:"W\u0142a\u015bciciel",id:"owner"}],ue=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={active:0,review:0,overdue:0,interval:null},e.timer=function(){var t=e.state.active,a=e.state.overdue,n=e.state.review;t<e.props.statistic.active&&(e.setState({active:t+1}),a<e.props.statistic.overdue&&e.setState({overdue:a+1}),n<e.props.statistic.review&&e.setState({review:n+1})),t===e.props.statistic.active&&a===e.props.statistic.overdue&&n===e.props.statistic.review&&clearInterval(e.interval)},e.addNew=function(){e.props.cleanUserPanel(),e.props.RAtype("new"),e.props.history.push("/riskAssessmentForm")},e.seeRow=function(t){var a=t.target.parentElement.id;e.props.cleanUserPanel(),"drafts"!==e.props.user?(e.props.RAtype("preview"),e.props.history.push("/riskAssessment/"+a)):(e.props.RAtype("draft"),e.props.history.push("/riskAssessmentForm/"+a))},e.changeView=function(t){"BUTTON"!==t.target.tagName&&"H1"!==t.target.tagName||0===e.state[t.target.id]?e.props.changeView(t.target.value):e.props.changeView(t.target.id)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.initRAList(),this.props.cleanState();var e=setInterval(this.timer,80);this.setState({interval:e})}},{key:"render",value:function(){var e=this,t=this.props.assessmentsList,a={};for(var n in t){var i=this.props.search.searchValue;i?(t[n].position.toUpperCase().indexOf(i)>-1||t[n].no.toString().indexOf(i)>-1||t[n].owner.toUpperCase().indexOf(i)>-1)&&(a[n]=t[n]):a=t}var s=Object.keys(a).filter((function(t){return"review"===e.props.user?a[t].review:"overdue"===e.props.user?a[t].overdue:t})),o={};if("drafts"!==this.props.user)for(var u in s)o[s[u]]={number:a[s[u]].no,position:a[s[u]].position,owner:a[s[u]].owner};else o=this.props.draftsList;var l=r.a.createElement(c.a,null,r.a.createElement("img",{src:ie.a,className:H.a.Image}),r.a.createElement("div",{className:H.a.BasicUserNav},r.a.createElement(ne,{search:this.props.search.searchValue,changed:function(t){return e.props.searchValue(t)},value:this.props.search.searchValue,closeSearch:this.props.clearSearch,active:!0})));return this.props.isAuth&&(l=r.a.createElement(c.a,null,r.a.createElement("img",{src:ce.a,className:H.a.Image}),r.a.createElement(X,{matric:this.props.statistic,clicked:function(t){return e.changeView(t)},active:this.state.active,review:this.state.review,overdue:this.state.overdue}),r.a.createElement("div",{className:H.a.UserNav},r.a.createElement(ee,{clicked:function(t){return e.changeView(t)},review:this.props.statistic.review,overdue:this.props.statistic.overdue,workCopy:Object.keys(this.props.draftsList).length,activeBtn:this.props.user,submit:this.addNew,changed:function(t){return e.changeView(t)}}),r.a.createElement(ne,{search:this.props.search.searchValue,changed:function(t){return e.props.searchValue(t)},value:this.props.search.searchValue,closeSearch:this.props.clearSearch,changeSearch:this.props.searchBtn,active:this.props.search.searchField})))),r.a.createElement(c.a,null,l,r.a.createElement(B.a,null,r.a.createElement(Y,{table:H.a.Table,columns:oe,rows:o,sortable:this.props.sorted.sort,pagination:!0,sortOption:this.props.sorted,sort:function(t){return e.props.sortData(t)},changePage:this.props.changePage,page:this.props.pagination.page,range:this.props.pagination.range,view:function(t){return e.seeRow(t)}})),r.a.createElement("div",{className:H.a.Search},r.a.createElement(ne,{search:this.props.search.searchValue,changed:function(t){return e.props.searchValue(t)},value:this.props.search.searchValue,closeSearch:this.props.clearSearch,active:!0})))}}]),a}(r.a.Component),le=Object(I.b)((function(e){return{user:e.userPanel.activeBtn,search:e.userPanel.search,pagination:e.userPanel.pagination,sorted:e.userPanel.sorted,assessmentsList:e.userPanel.assessmentsList,statistic:e.userPanel.statistic,draftsList:e.userPanel.draftsList,isAuth:e.firebase.auth.uid}}),(function(e){return{cleanUserPanel:function(){return e(P.q())},changeView:function(t){return e(P.j(t))},searchBtn:function(){return e(P.z())},clearSearch:function(){return e({type:"CLEAR_SEARCH"})},searchValue:function(t){return e(P.A(t))},changePage:function(t){return e(P.i(t))},sortData:function(t){return e(P.D(t))},initRAList:function(){return e(P.t())},cleanState:function(){return e(P.p())},RAtype:function(t){return e(P.a(t))}}}))(ue),de=function(e){return function(t){Object(f.a)(n,t);var a=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={component:null},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this;e().then((function(e){return t.setState({component:e.default})}))}},{key:"render",value:function(){var e=this.state.component;return e?r.a.createElement(e,this.props):null}}]),n}(r.a.Component)},pe=a(40),fe=de((function(){return a.e(4).then(a.bind(null,749))})),me=de((function(){return a.e(6).then(a.bind(null,747))})),he=de((function(){return a.e(5).then(a.bind(null,750))})),ve=de((function(){return a.e(3).then(a.bind(null,748))})),be=Object(I.b)((function(e){return{auth:e.firebase.auth.uid}}))((function(e){o.b.add(u.a,l.i,l.k,l.j,l.g,l.h,l.l,l.a,l.b,l.m,l.d,l.f,l.c,l.e);var t=e.auth,a=r.a.createElement(pe.d,null,r.a.createElement(pe.b,{path:"/",exact:!0,component:le}),r.a.createElement(pe.b,{path:"/riskAssessment/:id",component:fe}),r.a.createElement(pe.b,{path:"/authentication",component:me}),r.a.createElement(pe.b,{path:"/process",component:he}),r.a.createElement(pe.a,{to:"/"}));return t&&(a=r.a.createElement(pe.d,null,r.a.createElement(pe.b,{path:"/",exact:!0,component:le}),r.a.createElement(pe.b,{path:"/riskAssessment/:id",component:fe}),r.a.createElement(pe.b,{path:"/riskAssessmentForm",exact:!0,component:ve}),r.a.createElement(pe.b,{path:"/riskAssessmentForm/:id/:version",exact:!0,component:ve}),r.a.createElement(pe.b,{path:"/process",component:he}),r.a.createElement(pe.a,{to:"/"}))),r.a.createElement(c.a,null,r.a.createElement(F,null,a))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=a(50),Oe=a(361),je=a(21),_e=a(1),ye=a(2),we={activeBtn:"active",search:{searchValue:"",searchField:!1},pagination:{page:1,range:3},sorted:{id:"number",sortType:"asc",sort:!0},statistic:{active:0,review:0,overdue:0},assessmentsList:{},draftsList:{},loading:!1,error:!1,message:null},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye.p:return Object(_e.a)(Object(_e.a)({},e),{},{activeBtn:"active",search:{searchValue:"",searchField:!1},pagination:Object(_e.a)(Object(_e.a)({},e.pagination),{},{page:1}),sorted:Object(_e.a)(Object(_e.a)({},e.sorted),{},{id:"number",sortType:"asc"})});case ye.j:return Object(_e.a)(Object(_e.a)({},e),{},{activeBtn:t.event,pagination:Object(_e.a)(Object(_e.a)({},e.pagination),{},{page:1}),search:{searchValue:"",searchField:!1}});case ye.N:var a=e.search.searchValue;return e.search.searchField&&(a=""),Object(_e.a)(Object(_e.a)({},e),{},{search:Object(_e.a)(Object(_e.a)({},e.search),{},{searchField:!e.search.searchField,searchValue:a})});case ye.O:return Object(_e.a)(Object(_e.a)({},e),{},{search:Object(_e.a)(Object(_e.a)({},e.search),{},{searchValue:t.searchValue})});case ye.r:return Object(_e.a)(Object(_e.a)({},e),{},{search:Object(_e.a)(Object(_e.a)({},e.search),{},{searchValue:""})});case ye.H:return Object(_e.a)(Object(_e.a)({},e),{},{pagination:Object(_e.a)(Object(_e.a)({},e.pagination),{},{page:t.page})});case ye.T:var n=t.event,r=e.sorted.id,i=e.sorted.sortType;return n===r?i="asc"===i?"desc":"asc":(r=n,i="asc"),Object(_e.a)(Object(_e.a)({},e),{},{pagination:Object(_e.a)(Object(_e.a)({},e.pagination),{},{page:1}),sorted:Object(_e.a)(Object(_e.a)({},e.sorted),{},{id:r,sortType:i})});case ye.b:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!0});case ye.c:return Object(_e.a)(Object(_e.a)({},e),{},{assessmentsList:Object(_e.a)(Object(_e.a)({},e.assessmentsList),{},Object(je.a)({},t.id,t.data)),statistic:Object(_e.a)(Object(_e.a)({},e.statistic),{},{active:e.statistic.active+1}),error:!1,loading:!1,message:"Nowa ocena ryzyka zosta\u0142a dodana"});case ye.a:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,error:!0,message:t.message});case ye.d:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,error:!1,message:"Nowa wersja oceny ryzyka zawodowego zosta\u0142a zapisana"});case ye.e:return Object(_e.a)(Object(_e.a)({},e),{},{draftsList:Object(_e.a)(Object(_e.a)({},e.draftsList),{},Object(je.a)({},t.id,t.data)),error:!1,loading:!1,message:"Kopia robocza zosta\u0142a dodana do bazy."});case ye.L:var s=e.draftsList;return delete s[t.id],Object(_e.a)(Object(_e.a)({},e),{},{draftsList:s});case ye.m:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,error:!1,message:null});case ye.x:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!0});case ye.v:return Object(_e.a)(Object(_e.a)({},e),{},{assessmentsList:Object(_e.a)(Object(_e.a)({},e.assessmentsList),t.RAdata),draftsList:Object(_e.a)(Object(_e.a)({},e.draftsList),t.draftsData),statistic:Object(_e.a)(Object(_e.a)({},e.statistic),{},{active:t.active,overdue:t.overdue,review:t.review})});case ye.u:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1});default:return e}},ke=new Date,Ae=ke.getFullYear()+1,Se=ke.getMonth(),Ne=ke.getDate(),Le=new Date(Ae,Se,Ne).toISOString().substring(0,10),Ce={RAtype:"new",id:null,number:0,version:0,assessmentData:{date:(new Date).toISOString().substring(0,10),team:"",position:"",localization:"",description:"",notice:"",reviewDate:Le,owner:""},hazardList:null,validity:{requiredHazards:2,hazardsValidity:!1,dataValidity:!1},error:!1},De=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ye.C:return Object(_e.a)(Object(_e.a)({},t),{},{assessmentData:Object(_e.a)(Object(_e.a)({},t.assessmentData),{},Object(je.a)({},a.data,a.value))});case ye.l:var n,r=t.assessmentData;return n=""!==r.team&&""!==r.position&&""!==r.localization&&""!==r.description&&""!==r.owner,Object(_e.a)(Object(_e.a)({},t),{},{validity:Object(_e.a)(Object(_e.a)({},t.validity),{},{dataValidity:n})});case ye.P:return Object(_e.a)(Object(_e.a)({},t),{},{hazardList:a.hazardList,error:!1});case ye.Q:return Object(_e.a)(Object(_e.a)({},t),{},{number:a.number,error:!1});case ye.y:return Object(_e.a)(Object(_e.a)({},t),{},{hazardList:Object(_e.a)(Object(_e.a)({},t.hazardList),{},Object(je.a)({},a.id,Object(_e.a)(Object(_e.a)({},t.hazardList[a.id]),{},{checked:!t.hazardList[a.id].checked})))});case ye.n:return Object(_e.a)(Object(_e.a)({},t),{},{hazardList:Object(_e.a)(Object(_e.a)({},t.hazardList),{},Object(je.a)({},a.id,Object(_e.a)(Object(_e.a)({},t.hazardList[a.id]),{},{source:"",possibleEffects:"",protection:"",effect:"",propability:"",clean:!0,save:!1,valid:!1,checked:!t.hazardList[a.id].checked})))});case ye.M:var i=!1,s=t.hazardList[a.id];return""!==s.source&&""!==s.possibleEffects&&""!==s.protection&&""!==s.effect&&""!==s.propability&&(i=!0),Object(_e.a)(Object(_e.a)({},t),{},{hazardList:Object(_e.a)(Object(_e.a)({},t.hazardList),{},Object(je.a)({},a.id,Object(_e.a)(Object(_e.a)({},t.hazardList[a.id]),{},{clean:!1,save:!0,valid:i,checked:!t.hazardList[a.id].checked})))});case ye.k:var c=0;for(var o in t.hazardList)t.hazardList[o].save&&t.hazardList[o].valid&&(c+=1);return Object(_e.a)(Object(_e.a)({},t),{},{validity:Object(_e.a)(Object(_e.a)({},t.validity),{},{hazardsValidity:c>=t.validity.requiredHazards})});case ye.w:return Object(_e.a)(Object(_e.a)({},t),{},{hazardList:Object(_e.a)(Object(_e.a)({},t.hazardList),{},Object(je.a)({},a.id,Object(_e.a)(Object(_e.a)({},t.hazardList[a.id]),{},(e={},Object(je.a)(e,a.name,a.value),Object(je.a)(e,"clean",!1),e))))});case ye.q:return{RAtype:null,id:null,number:"",version:0,assessmentData:Object(_e.a)(Object(_e.a)({},t.assessmentData),{},{team:"",position:"",localization:"",description:"",notice:"",owner:""}),hazardList:null,validity:{requiredHazards:2,hazardsValidity:!1,dataValidity:!1},error:!1};case ye.J:return Object(_e.a)(Object(_e.a)({},t),{},{id:a.id,number:a.number,version:a.version,assessmentData:a.assessmentData,hazardList:a.hazardList,validity:Object(_e.a)(Object(_e.a)({},t.validity),{},{hazardsValidity:!1,dataValidity:!1}),error:!1});case ye.K:return Object(_e.a)(Object(_e.a)({},t),{},{RAtype:a.RAtype});default:return t}},ze={loading:!1,message:null,error:!0},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye.h:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!0});case ye.i:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,error:!1,message:"Ocena ryzyka zosta\u0142a przeniesiona do archiwum"});case ye.f:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,message:"Wyst\u0105pi\u0142 b\u0142\u0105d, spr\xf3buj ponownie",error:!0});case ye.I:return Object(_e.a)(Object(_e.a)({},e),{},{message:null,error:!1});default:return e}},Ie={versionsList:{},loading:!1,error:!1},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye.g:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!0});case ye.t:return Object(_e.a)(Object(_e.a)({},e),{},{versionsList:t.versionsList,loading:!1,error:!1});case ye.s:return Object(_e.a)(Object(_e.a)({},e),{},{error:!0});default:return e}},Pe={loading:!1,error:null},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye.z:case ye.A:case ye.B:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!0});case ye.D:case ye.F:case ye.R:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,error:null});case ye.E:case ye.G:case ye.S:return Object(_e.a)(Object(_e.a)({},e),{},{loading:!1,error:t.error});case ye.o:return Object(_e.a)(Object(_e.a)({},e),{},{error:null});default:return e}},Fe=a(362),xe=a(203),He=a.n(xe);a(719),a(721);He.a.initializeApp({apiKey:"AIzaSyC6Tfh2KFGCUXVLxbx_TmxoHKvUBHaTe-A",authDomain:"riskassessmentapp.firebaseapp.com",databaseURL:"https://riskassessmentapp.firebaseio.com",projectId:"riskassessmentapp",storageBucket:"riskassessmentapp.appspot.com",messagingSenderId:"127189732188",appId:"1:127189732188:web:707d740c037e015c874f99"});var Be=He.a,Ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.d,We=Object(ge.c)({userPanel:Ee,riskAssessment:De,riskAssessmentOutput:Re,archiveHistory:Te,authentication:Ve,firebase:T.firebaseReducer}),Ge=Object(ge.e)(We,Ue(Object(ge.a)(Oe.a.withExtraArgument({getFirebase:T.getFirebase})))),Me={firebase:Be,config:{userProfile:"users"},dispatch:Ge.dispatch,createFirestoreInstance:Fe.createFirestoreInstance};s.a.render(r.a.createElement(I.a,{store:Ge},r.a.createElement(T.ReactReduxFirebaseProvider,Me,r.a.createElement(_.a,null,r.a.createElement(be,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,a){e.exports={SideDrawer:"sideDrawer_SideDrawer__Khv-v",Close:"sideDrawer_Close__29HeH",Open:"sideDrawer_Open__eqASA"}},90:function(e,t,a){e.exports={StatisticBox:"statistic_StatisticBox__1iJIE",Active:"statistic_Active__SYDFG",Review:"statistic_Review__3il2Y",Overdue:"statistic_Overdue__2uWkk"}},91:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(7),s=a(41),c=a.n(s);t.a=function(e){var t=null;switch(e.elementType){case"input":t=r.a.createElement("input",{className:[c.a.Style,c.a.Input,e.inputPosition].join(" "),onChange:e.changed,name:e.name,id:e.id,value:e.value,type:e.type,placeholder:e.placeholder,disabled:e.disabled,autoFocus:e.autoFocus});break;case"textarea":t=r.a.createElement("textarea",{className:[c.a.Style,c.a.Textarea,e.inputPosition].join(" "),onChange:e.changed,name:e.name,id:e.id,value:e.value});break;case"select":var a=e.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value,id:e.value},e.displayValue)}));t=r.a.createElement("select",{className:[c.a.Style,e.inputPosition].join(" "),onChange:e.changed,name:e.name,id:e.id,value:e.value},a);break;default:t=r.a.createElement("input",{className:[c.a.Style,c.a.Input,e.inputPosition].join(" "),onChange:e.changed,name:e.name,id:e.id,value:e.value})}return r.a.createElement(i.a,null,r.a.createElement("label",{htmlFor:e.for,className:e.labelPosition},e.label),t)}}},[[363,1,2]]]);
//# sourceMappingURL=main.4b5304d8.chunk.js.map